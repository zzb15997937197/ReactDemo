<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>React生命周期之shouldComponentUpdate</title>
<script src="https://cdn.staticfile.org/react/16.4.0/umd/react.development.js"></script>
<script src="https://cdn.staticfile.org/react-dom/16.4.0/umd/react-dom.development.js"></script>
<script src="https://cdn.staticfile.org/babel-standalone/6.26.0/babel.min.js"></script>
</head>
<body>
           <div id="example"></div>
    <script type="text/babel">
   class Toggle extends React.Component{
       constructor(props){
         super(props);
         this.state={isToggleOn:true};
         //绑定方法this,在回调函数中使用this
          this.handleClick=this.handleClick.bind(this);
      }

// 使用prevState来更新之前的状态
      handleClick(){
        this.setState(
          prevState=>({
            isToggleOn:!prevState.isToggleOn
          })
       )}

        shouldComponentUpdate(){
              alert("组件接收到新的状态或者props")
             return true;
       }
       render(){
           return(
           //此处如果不使用this来点handleClick则会出现handleClick的undefined
             <button onClick={this.handleClick}> 
                {this.state.isToggleOn?"张正兵":this.props.name}
             </button>
             );
           }
  }       
   ReactDOM.render(
      <Toggle name="易雪莲"/>,
       document.getElementById("example")
  );
</script>

</body>
</html>